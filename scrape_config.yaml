# Global configuration
global:
  scrape_interval: 15s  # Default interval between scrapes

# New CR format configuration
features:
  openAgent:
    enabled: true
    # Global default settings (can be overridden in targets)
    globalInterval: "60s"
    globalPath: "/metrics"
    targets:
      # 2. ServiceMonitor: Service label selector based dynamic discovery
      - targetName: kube-apiserver
        type: ServiceMonitor
        namespaceSelector:
          matchNames:
            - "default"
        selector:
          matchLabels:
            component: apiserver
            provider: kubernetes
        endpoints:  # Endpoints to scrape from Pods connected to this Service
          - port: "https"  # Port name (or number) where metrics are exposed
            path: "/metrics"
            interval: "30s"
            metricSelector:
              - apiserver_requests_total
